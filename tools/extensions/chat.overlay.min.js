var AC_WordsAction="highlight";var AC_WordsList=[];function AC_GetUrlParameter(sParam){var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam){return typeof sParameterName[1]===undefined?true:decodeURIComponent(sParameterName[1])}}return false}function AC_GetDomainName(domain){return window.location.hostname.split(".").slice(-2).join(".").split(".")[0].toLowerCase()}function AC_InPopup(){return window.opener&&window.opener!==window}function AC_IsPopupAllowed(newWindow){if(!newWindow||newWindow.closed||typeof newWindow.closed=="undefined"){return false}return true}function AC_OpenInTab(){var newWindow;if(AC_InPopup()){var domain=AC_GetDomainName();switch(domain){case"youtube":const videoId=AC_GetUrlParameter("v");newWindow=window.open(`https://youtube.com/live_chat?v=${videoId}`,"_blank");AC_IsPopupAllowed(newWindow)?window.close():console.log("popup blocked");break;case"twitch":case"facebook":default:console.log(`AC_OpenInTab: ${domain} not found`)}}}function AC_SelectOnInsertion(containerSelector,tag,callback){var insertionObserver=function(mutations){mutations.forEach(function(mutation){if(mutation.addedNodes.length){for(var i=0,len=mutation.addedNodes.length;i<len;i++){if(mutation.addedNodes[i].tagName===tag.toUpperCase()){callback(mutation.addedNodes[i])}}}})};var target=document.querySelectorAll(containerSelector)[0];var config={childList:true,subtree:true};var MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var observer=new MutationObserver(insertionObserver);observer.observe(target,config)}function AC_OpenFullscreen(element){if(element.requestFullscreen){element.requestFullscreen()}else if(element.webkitRequestFullscreen){element.webkitRequestFullscreen()}else if(element.msRequestFullscreen){element.msRequestFullscreen()}}function AC_CloseFullscreen(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}}function AC_ToggleFullscreen(fullscreen){var element=document.documentElement;fullscreen?AC_OpenFullscreen(element):AC_CloseFullscreen()}function AC_Navigate(link){window.open(link,"_blank")}function AC_AppendScript(src){var s=document.createElement("script");s.src=src;s.type="text/javascript";document.body.appendChild(s)}function AC_AppendStyle(src){var s=document.createElement("link");s.href=src;s.rel="stylesheet";s.type="text/css";document.head.appendChild(s)}function AC_ListenToChild(){window.addEventListener("message",event=>{if(event.data.type==="avidcaster-overlay-north-bound"){switch(event.data.action){case"append-script":AC_AppendScript(event.data.payload.url);break;case"append-style":AC_AppendStyle(event.data.payload.url);break;case"navigate":AC_Navigate(event.data.payload.url);break;case"fullscreen":AC_ToggleFullscreen(event.data.payload.fullscreen);break;case"process-words":AC_WordsAction=event.data.payload.action;AC_WordsList=(event.data.payload.words||[]).map(word=>word.trim().toLowerCase()).filter(word=>word.length>0);default:break}}},false)}function AC_InsertIframe(){if(!$("#avidcaster-iframe").length){var isProd=AC_GetUrlParameter("prod")==="false"?false:true;var site=isProd?"avidcaster.net":"avidcaster.dev:80";var target=AC_GetDomainName()||"youtube";switch(target){case"youtube":var iframe=`<iframe id="avidcaster-iframe" src="https://${site}/chat/${target}/overlay"></iframe>`;$("yt-live-chat-app").append(iframe);break;case"twitch":console.log("Twitch not supported yet");break;case"facebook":console.log("Facebook not supported yet");break;default:break}}}function AC_InjectJquery(){window?.jQuery||AC_AppendScript("https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js")}AC_OpenInTab();AC_InjectJquery();AC_ListenToChild();setTimeout(function(){AC_InsertIframe()},500);